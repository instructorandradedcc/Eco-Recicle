<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECORECYCLE: Ecosistema de Econom√≠a Circular e IA</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB;
            color: #1F2937;
        }

        /* Estilos del Contenedor de Gr√°ficos (Responsive) */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* --- SISTEMA ORBITAL (CSS Compartido) --- */
        .eco-hub-container {
            position: relative;
            width: 100%;
            height: 650px;
            max-width: 850px;
            margin: 0 auto;
            overflow: hidden;
            /* background-color: #f8fafc;  Opcional: fondo muy sutil */
            border-radius: 20px;
        }

        /* L√≠neas conectoras */
        .line-from-center {
            position: absolute;
            top: 50%;
            left: 50%;
            height: 2px;
            background-color: #cbd5e1;
            transform-origin: 0% 50%; /* Rota desde el centro */
            z-index: 5;
            width: 30%; /* Radio del c√≠rculo (ajustable) */
        }

        .eco-node {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            z-index: 10;
        }

        .eco-node:hover {
            z-index: 20;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Nodos Espec√≠ficos */
        .node-center {
            width: 160px;
            height: 160px;
            background: linear-gradient(135deg, #15803d, #166534);
            color: white;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.1rem;
            border: 6px solid #dcfce7;
            z-index: 50; /* Siempre encima de las l√≠neas */
        }
        .node-center:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .node-satellite {
            width: 110px;
            height: 110px;
            background-color: white;
            border: 2px solid #166534;
            color: #166534;
            font-size: 0.8rem;
            padding: 5px;
            line-height: 1.2;
            /* Importante: Centrar el nodo en su coordenada */
            transform: translate(-50%, -50%);
        }

        .node-satellite:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }
        
        .node-satellite.active {
            transform: translate(-50%, -50%) scale(1.15);
            box-shadow: 0 0 0 4px rgba(22, 163, 74, 0.3);
            z-index: 30;
        }

        /* Animaciones */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }

        /* Ajustes M√≥viles */
        @media (max-width: 640px) {
            .eco-hub-container {
                height: 550px;
            }
            .node-center {
                width: 110px;
                height: 110px;
                font-size: 0.85rem;
            }
            .node-satellite {
                width: 85px;
                height: 85px;
                font-size: 0.65rem;
            }
            .line-from-center {
                width: 38%; /* Radio un poco mayor en m√≥vil relativo al contenedor */
            }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <!-- LOGO ACTUALIZADO -->
                <div class="h-14 w-14 rounded-full overflow-hidden border border-gray-200 shadow-sm flex items-center justify-center bg-white">
                    <img src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/logofundacion.jpg" alt="Logo Fundaci√≥n" class="h-full w-full object-cover">
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-900 leading-tight">ECORECYCLE</h1>
                    <p class="text-xs text-gray-500">Fundaci√≥n Ecopiensa Evolution</p>
                </div>
            </div>
            <nav class="hidden md:flex space-x-8">
                <button onclick="scrollToSection('home')" class="text-gray-600 hover:text-green-700 font-medium">Inicio</button>
                <button onclick="scrollToSection('macro-ecosystem')" class="text-gray-600 hover:text-green-700 font-medium">Macro-Proceso</button>
                <button onclick="scrollToSection('timeline')" class="text-gray-600 hover:text-green-700 font-medium">Cronograma</button>
            </nav>
        </div>
    </header>

    <main class="flex-grow">
        
        <section id="home" class="bg-gradient-to-b from-green-50 to-white py-12 sm:py-20 text-center">
            <div class="max-w-4xl mx-auto px-4">
                <span class="inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold mb-4">Proyecto Triple Impacto</span>
                <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
                    Modelo Integral de Gesti√≥n<br>
                    <span class="text-green-700">Econom√≠a Circular Tecnificada</span>
                </h2>
                <p class="mt-4 text-xl text-gray-600">
                    Articulaci√≥n estrat√©gica para la transformaci√≥n de residuos en el Valle del Cauca, integrando inteligencia artificial y valor social.
                </p>
                <div class="mt-8">
                    <button onclick="scrollToSection('macro-ecosystem')" class="px-8 py-3 bg-green-700 text-white rounded-lg hover:bg-green-800 shadow-lg font-medium transition transform hover:-translate-y-1">
                        Ver Ecosistema
                    </button>
                </div>
            </div>
        </section>

        <!-- SECCI√ìN 1: DIAGRAMA MACRO SIM√âTRICO -->
        <section id="macro-ecosystem" class="py-16 bg-white border-t border-gray-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <span class="text-green-600 font-bold tracking-wider uppercase text-sm">Vista General</span>
                    <h3 class="text-3xl font-bold text-gray-900 mt-2">Macro-Ecosistema de Aprovechamiento</h3>
                    <p class="mt-3 text-gray-600 max-w-2xl mx-auto">
                        La <strong>ECA</strong> opera como el cerebro log√≠stico central. Los componentes giran sim√©tricamente integrando todas las l√≠neas de valorizaci√≥n.
                    </p>
                </div>

                <div class="eco-hub-container mb-12">
                    <!-- 
                        CONFIGURACI√ìN SIM√âTRICA (7 Nodos Sat√©lites + 1 Central)
                        √Ångulo de separaci√≥n: 360 / 7 ‚âà 51.4 grados
                        Radio: 30% del contenedor
                        Inicio: -90 grados (12 en punto)
                    -->
                    
                    <!-- L√çNEAS CONECTORAS (Rotaci√≥n desde el centro) -->
                    <div class="line-from-center" style="transform: rotate(-90deg);"></div>   <!-- 1. RCD -->
                    <div class="line-from-center" style="transform: rotate(-38.6deg);"></div> <!-- 2. ECO-CIDAS -->
                    <div class="line-from-center" style="transform: rotate(12.8deg);"></div>  <!-- 3. ECO-CIA -->
                    <div class="line-from-center" style="transform: rotate(64.2deg);"></div>  <!-- 4. Lodos -->
                    <div class="line-from-center" style="transform: rotate(115.6deg);"></div> <!-- 5. Ecogranjas -->
                    <div class="line-from-center" style="transform: rotate(167deg);"></div>   <!-- 6. Org√°nico -->
                    <div class="line-from-center" style="transform: rotate(218.4deg);"></div> <!-- 7. Reciclables -->


                    <!-- NODO CENTRAL -->
                    <div class="eco-node node-center shadow-lg cursor-pointer" onclick="loadContent('eca_center', this)">
                        ECA<br><span class="text-xs font-normal opacity-90 mt-1 block">Cerebro Log√≠stico</span>
                    </div>

                    <!-- NODOS SAT√âLITES (Posicionados con porcentajes para simetr√≠a perfecta) -->
                    
                    <!-- 1. RCD (-90¬∞) - Arriba Centro -->
                    <div class="eco-node node-satellite hover:border-blue-500 hover:text-blue-600" 
                         style="left: 50%; top: 20%;" 
                         onclick="loadContent('rcd', this)">
                        Aprov.<br>RCD
                    </div>

                    <!-- 2. Eco-Cidas (-38.6¬∞) - Arriba Derecha -->
                    <div class="eco-node node-satellite hover:border-purple-500 hover:text-purple-600" 
                         style="left: 73.4%; top: 31.3%;" 
                         onclick="loadContent('ecocidas', this)">
                        ECO-CIDAS<br><span class="text-[10px] text-gray-400">Inteligencia</span>
                    </div>

                    <!-- 3. ECO-CIA (12.8¬∞) - Derecha -->
                    <div class="eco-node node-satellite hover:border-indigo-500 hover:text-indigo-600" 
                         style="left: 79.2%; top: 56.7%;" 
                         onclick="loadContent('ecocia_arm', this)">
                        ECO-CIA<br><span class="text-[10px] text-gray-400">Agro</span>
                    </div>

                    <!-- 4. Lodos (64.2¬∞) - Abajo Derecha -->
                    <div class="eco-node node-satellite hover:border-gray-600 hover:text-gray-700" 
                         style="left: 63%; top: 77%;" 
                         onclick="loadContent('lodos', this)">
                        Aprov.<br>Lodos
                    </div>

                    <!-- 5. Ecogranjas (115.6¬∞) - Abajo Izquierda -->
                    <div class="eco-node node-satellite hover:border-green-500 hover:text-green-600" 
                         style="left: 37%; top: 77%;" 
                         onclick="loadContent('ecogranjas', this)">
                        Eco<br>Granjas
                    </div>

                    <!-- 6. Org√°nico (167¬∞) - Izquierda Abajo -->
                    <div class="eco-node node-satellite hover:border-yellow-600 hover:text-yellow-700" 
                         style="left: 20.8%; top: 56.7%;" 
                         onclick="loadContent('organicos', this)">
                        Aprov.<br>Org√°nico
                    </div>

                    <!-- 7. Reciclables (218.4¬∞) - Izquierda Arriba -->
                    <div class="eco-node node-satellite hover:border-teal-500 hover:text-teal-600" 
                         style="left: 26.6%; top: 31.3%;" 
                         onclick="loadContent('reciclables', this)">
                        Pl√°stico,<br>Cart√≥n
                    </div>

                </div>

                <!-- √ÅREA DE DETALLES -->
                <div id="detail-view" class="bg-gray-50 rounded-2xl shadow-inner border border-gray-200 p-6 md:p-10 min-h-[500px] transition-all duration-300 relative scroll-mt-24">
                    
                    <div id="default-content" class="text-center h-full flex flex-col justify-center items-center py-10">
                        <div class="text-5xl mb-4 opacity-50">üëÜ</div>
                        <h4 class="text-2xl font-semibold text-gray-800">Selecciona un componente del diagrama</h4>
                        <p class="text-gray-500 mt-2 max-w-md">Haz clic en los c√≠rculos para ver la informaci√≥n detallada y t√©cnica de cada nodo operativo.</p>
                    </div>

                    <div id="dynamic-content" class="hidden animate-fade-in">
                        <!-- El contenido se inyecta aqu√≠ con JS -->
                    </div>
                </div>

            </div>
        </section>

        <!-- SECCI√ìN 3: CRONOGRAMA -->
        <section id="timeline" class="py-16 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h3 class="text-2xl font-bold text-gray-900">Implementaci√≥n y Log√≠stica</h3>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <span class="mr-2">üìç</span> Cobertura Geogr√°fica
                        </h3>
                        <p class="text-sm text-gray-600 mb-4">
                            Articulaci√≥n regional centrada en Tulu√°.
                        </p>
                        <div class="relative w-full h-64 bg-green-100 rounded-lg overflow-hidden flex items-center justify-center">
                            <div class="absolute w-full h-full opacity-20 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')]"></div>
                            
                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center z-10">
                                <div class="w-4 h-4 bg-green-600 rounded-full mx-auto animate-pulse shadow-lg ring-4 ring-green-200"></div>
                                <span class="text-xs font-bold text-green-900 bg-white px-2 py-1 rounded shadow mt-1 block">TULU√Å (Hub ECA)</span>
                            </div>

                            <div class="absolute top-1/4 left-1/4 text-center">
                                <div class="w-3 h-3 bg-gray-500 rounded-full mx-auto"></div>
                                <span class="text-[10px] text-gray-600 bg-white px-1 rounded shadow mt-1 block">Riofr√≠o</span>
                            </div>

                            <div class="absolute bottom-1/4 right-1/4 text-center">
                                <div class="w-3 h-3 bg-gray-500 rounded-full mx-auto"></div>
                                <span class="text-[10px] text-gray-600 bg-white px-1 rounded shadow mt-1 block">Andaluc√≠a</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <span class="mr-2">üìÖ</span> Fases del Proyecto
                        </h3>
                        <div class="chart-container" style="height: 250px;">
                            <canvas id="timelineChart"></canvas>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-900 text-white py-10">
        <div class="max-w-7xl mx-auto px-4 text-center md:text-left grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="flex flex-col items-center md:items-start">
                <div class="h-12 w-12 rounded-full overflow-hidden bg-white flex items-center justify-center mb-3">
                    <img src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/logofundacion.jpg" alt="Logo Footer" class="h-full w-full object-cover">
                </div>
                <h5 class="text-lg font-bold mb-2 text-green-400">Fundaci√≥n Ecopiensa Evolution</h5>
                <p class="text-xs text-gray-400">Transformando residuos en recursos mediante innovaci√≥n tecnol√≥gica y social.</p>
            </div>
            <div>
                <h5 class="text-sm font-bold uppercase tracking-wider mb-3 text-gray-300">Contacto</h5>
                <ul class="text-xs text-gray-400 space-y-1">
                    <li>Arq. Iv√°n Dar√≠o Mej√≠a Mu√±oz</li>
                    <li>Ing. Olmer Geovanny Andrade</li>
                    <li>Tulu√°, Valle del Cauca</li>
                </ul>
            </div>
            <div>
                <h5 class="text-sm font-bold uppercase tracking-wider mb-3 text-gray-300">Marco Legal</h5>
                <p class="text-xs text-gray-400">Cumplimiento Res. 1257 de 2021.</p>
                <p class="text-xs text-gray-400">NIT: 900998128. Vigilado Superservicios.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- BASE DE DATOS DEL PROYECTO ACTUALIZADA CON INFORME T√âCNICO ---
        const projectData = {
            'eca_center': {
                title: "ECA: Estaci√≥n de Clasificaci√≥n y Aprovechamiento (Cerebro Log√≠stico)",
                color: "green",
                intro: "El coraz√≥n pulsante que irriga flujo, recursos y directrices. Un ente de Econom√≠a Circular Tecnificada que transforma pasivos ambientales en activos industriales, operando bajo estricto cumplimiento normativo.",
                details: [
                    "<strong>Legalidad:</strong> Vigilada por Superservicios (NIT 900998128) como prestador de servicios p√∫blicos.",
                    "<strong>Impacto Global:</strong> Alineaci√≥n directa con los ODS (Agenda 2030) en acci√≥n clim√°tica y reducci√≥n de pobreza.",
                    "<strong>Territorio:</strong> Nodo central en Tulu√° con red neuronal hacia municipios vecinos (Andaluc√≠a, Riofr√≠o, Trujillo, etc.)."
                ],
                chartConfig: {
                    type: 'doughnut',
                    title: 'Flujo de Entrada Estimado (%)',
                    labels: ['RCD', 'Org√°nicos', 'Reciclables', 'Especiales (Lodos/Aceites)'],
                    data: [40, 30, 20, 10]
                }
            },
            'ecocia_arm': {
                title: "ECO-CIA: Centro Integrar Agroecol√≥gico (Nodo Rural)",
                color: "indigo",
                intro: "Infraestructura de disposici√≥n comunitaria que articula producci√≥n, transformaci√≥n, distribuci√≥n y educaci√≥n para el sector campesino, resolviendo fallas de intermediaci√≥n.",
                details: [
                    "<strong>Log√≠stica Rural:</strong> Acopio, clasificaci√≥n, pesaje y transformaci√≥n b√°sica de productos agr√≠colas locales.",
                    "<strong>Tejido Social:</strong> Integra espacios vitales como centro m√©dico, escuela rural y parque familiar en el coraz√≥n veredal.",
                    "<strong>Red Capilar:</strong> Conexi√≥n entre Centros Municipales y Centros Veredales para cobertura territorial."
                ],
                chartConfig: {
                    type: 'radar',
                    title: 'Funciones del Nodo Agroecol√≥gico',
                    labels: ['Acopio & Log√≠stica', 'Transformaci√≥n', 'Educaci√≥n Rural', 'Salud & Bienestar', 'Comercializaci√≥n'],
                    data: [90, 75, 85, 80, 85]
                }
            },
            'ecocidas': {
                title: "ECO-CIDAS: Centro de Inteligencia y Desarrollo Agroindustrial y Social",
                color: "purple",
                intro: "El \"cerebro digital\" transversal que eleva el proyecto a Industria 4.0. Integra IA, IoT y rob√≥tica para optimizar desde la log√≠stica hasta la bi√≥nica y la biotecnolog√≠a.",
                details: [
                    "<strong>Gesti√≥n Predictiva:</strong> ERP con IA para predecir vol√∫menes de carga y optimizar rutas de recolecci√≥n.",
                    "<strong>Automatizaci√≥n:</strong> Visi√≥n artificial para clasificaci√≥n y rob√≥tica pesada guiada por LIDAR en plantas.",
                    "<strong>Bio-Inteligencia:</strong> Sensores IoT y control adaptativo en reactores para procesos org√°nicos de precisi√≥n.",
                    "<strong>Dise√±o Generativo:</strong> Creaci√≥n de pr√≥tesis bi√≥nicas personalizadas de bajo costo usando IA y biomim√©tica."
                ],
                chartConfig: {
                    type: 'radar',
                    title: 'Capacidades Tecnol√≥gicas (Industria 4.0)',
                    labels: ['Log√≠stica IA', 'Rob√≥tica Ind.', 'Bio-Inteligencia', 'Dise√±o Generativo', 'Data Analytics'],
                    data: [90, 85, 80, 95, 90]
                }
            },
            'reciclables': {
                title: "Aprovechamiento: Pl√°stico, Cart√≥n y PET",
                color: "teal",
                intro: "L√≠nea de valorizaci√≥n de materiales secos con alto potencial de reincorporaci√≥n industrial.",
                details: [
                    "<strong>Pl√°sticos:</strong> Peletizado y creaci√≥n de madera pl√°stica.",
                    "<strong>Cart√≥n/Papel:</strong> Compactaci√≥n para industria papelera.",
                    "<strong>PET:</strong> Lavado y triturado para fibra textil."
                ],
                chartConfig: {
                    type: 'bar',
                    title: 'Potencial de Venta (Ton/Mes)',
                    labels: ['PET', 'Cart√≥n', 'Pl√°stico Duro'],
                    data: [50, 80, 45]
                }
            },
            'organicos': {
                title: "Aprovechamiento Org√°nico",
                color: "yellow",
                intro: "Transformaci√≥n de residuos de comida y poda en enmiendas para el suelo mediante biotecnolog√≠a.",
                details: [
                    "<strong>Compostaje Tec.:</strong> Proceso aer√≥bico controlado con monitoreo IoT.",
                    "<strong>Lombricultura:</strong> Producci√≥n de humus l√≠quido y s√≥lido de alta calidad.",
                    "<strong>Impacto:</strong> Recuperaci√≥n de suelos degradados para las Eco-Aldeas."
                ],
                chartConfig: {
                    type: 'line',
                    title: 'Producci√≥n de Abono (Ton)',
                    labels: ['Mes 1', 'Mes 3', 'Mes 6', 'Mes 12'],
                    data: [5, 15, 40, 100]
                }
            },
            'ecogranjas': {
                title: "Eco-Granjas Integrales (Unidades Productivas)",
                color: "green",
                intro: "Espacios productivos autosostenibles y tecnificados que utilizan los insumos del sistema para la seguridad alimentaria.",
                details: [
                    "<strong>Producci√≥n:</strong> Huertas org√°nicas, piscicultura y l√≠neas pecuarias (gallinas, cerdos) alimentadas por el sistema.",
                    "<strong>Energ√≠a:</strong> Uso de biog√°s generado por residuos o energ√≠a solar.",
                    "<strong>Modelo:</strong> Parcelas tecnificadas para producci√≥n intensiva y sostenible."
                ],
                chartConfig: {
                    type: 'pie',
                    title: 'Distribuci√≥n Productiva',
                    labels: ['Cultivos Pancoger', 'L√≠nea Pecuaria', 'Piscicultura', 'Zona Bio-Insumos'],
                    data: [35, 30, 20, 15]
                }
            },
            'lodos': {
                title: "Aprovechamiento de Lodos",
                color: "gray",
                intro: "Tratamiento especializado de bios√≥lidos provenientes de PTAR o procesos industriales para su valorizaci√≥n.",
                details: [
                    "<strong>Estabilizaci√≥n:</strong> Secado y neutralizaci√≥n de pat√≥genos bajo normativa.",
                    "<strong>Uso Final:</strong> Mejoradores de suelo o combustible alternativo para la industria.",
                    "<strong>Cumplimiento:</strong> Estricto apego a la regulaci√≥n ambiental vigente."
                ],
                chartConfig: {
                    type: 'bar',
                    title: 'Reducci√≥n de Humedad (%)',
                    labels: ['Entrada', 'Post-Secado', 'Producto Final'],
                    data: [80, 40, 10]
                }
            },
            'rcd': {
                title: "Gesti√≥n de RCD (Cimentaci√≥n del Sistema)",
                color: "blue",
                intro: "Transformaci√≥n industrial de escombros para mitigar afecciones municipales y crear materiales de construcci√≥n.",
                details: [
                    "<strong>Proceso:</strong> Recepci√≥n, pesaje, caracterizaci√≥n y transformaci√≥n mec√°nica (trituraci√≥n).",
                    "<strong>Productos:</strong> Agregados para v√≠as terciarias, adoquines, bloques y mobiliario urbano.",
                    "<strong>Social:</strong> Formalizaci√≥n de carretilleros y generaci√≥n masiva de empleo base."
                ],
                chartConfig: {
                    type: 'bar',
                    title: 'Material Recuperado (m¬≥)',
                    labels: ['Concreto', 'Ladrillo', 'Tierras'],
                    data: [1200, 800, 400]
                }
            }
        };

        // --- GESTI√ìN DE ESTADO ---
        let currentChart = null;
        let timelineChart = null;

        // --- FUNCIONES DE NAVEGACI√ìN ---
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Funci√≥n Principal: Cargar contenido
        function loadContent(key, element) {
            const data = projectData[key];
            if (!data) return;

            // 1. Actualizar estilos visuales
            document.querySelectorAll('.eco-node').forEach(node => {
                node.classList.remove('active', 'scale-110');
                node.style.opacity = '0.6';
            });
            if(element) {
                element.classList.add('active');
                element.style.opacity = '1';
                element.style.transform = (element.classList.contains('node-center')) 
                    ? 'translate(-50%, -50%) scale(1.1)' 
                    : (element.style.transform.includes('translate') ? element.style.transform.replace('scale(1.1)', '') + ' scale(1.1)' : 'scale(1.1)'); 
            }

            // 2. Manejo UI
            const defaultContent = document.getElementById('default-content');
            const dynamicContent = document.getElementById('dynamic-content');
            
            defaultContent.classList.add('hidden');
            dynamicContent.classList.remove('hidden');

            // 3. Inyectar HTML
            dynamicContent.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 animate-fade-in h-full">
                    <div class="flex flex-col justify-center">
                        <div class="flex items-center mb-3">
                            <span class="w-3 h-8 bg-${data.color}-600 rounded-full mr-3"></span>
                            <h3 class="text-2xl font-bold text-gray-800 leading-tight">${data.title}</h3>
                        </div>
                        <p class="text-lg text-gray-600 mb-6 italic border-l-4 border-${data.color}-100 pl-4 bg-gray-50 py-2 rounded-r">
                            "${data.intro}"
                        </p>
                        <ul class="space-y-4 mb-4">
                            ${data.details.map(detail => `
                                <li class="flex items-start text-sm text-gray-700">
                                    <span class="text-${data.color}-600 mr-2 mt-1">‚û§</span>
                                    <span>${detail}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center justify-center">
                        <h5 class="text-xs font-bold text-gray-400 mb-4 uppercase tracking-wider w-full text-center border-b pb-2">M√©tricas Clave</h5>
                        <div class="chart-container w-full h-64">
                            <canvas id="detailChart"></canvas>
                        </div>
                    </div>
                </div>
            `;

            // 4. Renderizar Gr√°fico
            renderDetailChart(data.chartConfig, data.color);

            // 5. Scroll suave al detalle (ajustado para m√≥vil)
            const detailView = document.getElementById('detail-view');
            const yOffset = -50; 
            const y = detailView.getBoundingClientRect().top + window.pageYOffset + yOffset;
            window.scrollTo({top: y, behavior: 'smooth'});
        }

        // --- RENDERIZADO DE GR√ÅFICOS ---
        function renderDetailChart(config, colorName) {
            const ctx = document.getElementById('detailChart').getContext('2d');
            
            // Mapa de colores ampliado
            const colors = {
                'green': '#16a34a', 'blue': '#2563eb', 'yellow': '#ca8a04', 
                'indigo': '#4f46e5', 'orange': '#ea580c', 'teal': '#0d9488', 
                'gray': '#4b5563', 'purple': '#9333ea' // Nuevo color p√∫rpura
            };
            const mainColor = colors[colorName] || '#4b5563';

            if (currentChart) currentChart.destroy();

            currentChart = new Chart(ctx, {
                type: config.type,
                data: {
                    labels: config.labels,
                    datasets: [{
                        label: config.title,
                        data: config.data,
                        backgroundColor: [
                            mainColor,
                            adjustColor(mainColor, 0.5), 
                            adjustColor(mainColor, 0.3),
                            adjustColor(mainColor, 0.8),
                            adjustColor(mainColor, 0.4)
                        ],
                        borderWidth: 1,
                        borderColor: mainColor,
                        pointBackgroundColor: mainColor,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: mainColor
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { boxWidth: 10, font: { size: 10 } } },
                        title: { display: true, text: config.title, font: { size: 14, weight: 'bold', color: '#374151' } }
                    },
                    scales: config.type === 'radar' ? {
                        r: {
                            angleLines: { color: '#e5e7eb' },
                            grid: { color: '#e5e7eb' },
                            pointLabels: { font: { size: 11 } },
                            ticks: { backdropColor: 'transparent' }
                        }
                    } : {}
                }
            });
        }

        function adjustColor(hex, opacity) {
            let c;
            if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
                c= hex.substring(1).split('');
                if(c.length== 3){
                    c= [c[0], c[0], c[1], c[1], c[2], c[2]];
                }
                c= '0x'+c.join('');
                return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+opacity+')';
            }
            return hex;
        }

        function initTimelineChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            timelineChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Fase 1: Infraestructura (A√±o 1)', 'Fase 2: Expansi√≥n (A√±o 2)', 'Fase 3: Consolidaci√≥n (A√±os 3-5)'],
                    datasets: [{
                        label: 'Meses',
                        data: [12, 12, 36],
                        backgroundColor: ['#bbf7d0', '#4ade80', '#16a34a'],
                        borderRadius: 4,
                        barThickness: 30
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    return context.parsed.x + ' Meses';
                                }
                            }
                        }
                    },
                    scales: { x: { display: false }, y: { grid: { display: false }, ticks: { font: { size: 11 } } } }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            initTimelineChart();
        });

    </script>
</body>
</html>